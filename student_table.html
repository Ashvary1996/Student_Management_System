<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>table</title>
    <style>

        .container{
            font-size: 25px;
            margin: auto;
           
        }
        table,
        th,
        td {
            padding: 10px;
            border: 1px solid black;
            border-collapse: collapse;
        }

        thead>tr {
            background-color: rgba(198, 194, 194, 0.816);
        }

        tbody>tr {
            background-color: rgba(187, 234, 154, 0.559);
        }

        .bimg {
            border: 2px solid blue;
            width: 100px;
            height: 80px;
        }

        .del {
            background-color: teal;
            padding: 10px;
            font-size: 10px;
            cursor: pointer;

        }

        .del:hover {
            background-color: red;
        }

        button:hover {
            background-color: teal;
        }

        button {
            padding: 10px;
        }
        .navbtn{
            text-decoration: none;
            /* border-radius: 2px solid black ; */

        }
        .navbtn:hover{
            background-color: rgba(111, 69, 69, 0.684);
            color: black;
            border-radius: 3px;
        }
        #nav {
            display: flex;
            justify-content: space-evenly;
            flex-direction: row;
            background-color: rgba(255, 127, 80, 0.364);
            padding: 10px;
            font-size: 25px;

        }
    </style>
</head>

<body>
    <div id="nav">
        <div >
            <a class="navbtn" href="index.html"> Fill Form</a>
        </div>
        <div>
            <a  class="navbtn"href="display.html">Display Student Form</a>
        </div>
        <div>
            <a class="navbtn"href="student_table.html">Sort Student List</a>
        </div>
    </div>

    <div class="container">

        <div>
            <button id="b1">Sort From_Batch_01</button>
            <button id="b2">Sort From_Last_Batch</button>
            <!-- <select id="filter">
        <option value="">Filter By Batch</option>
        <option value="fw_18">fw_18</option>
        <option value="fw_19">fw_19</option>
        <option value="fw_20">fw_20</option>
        <option value="fw_21">fw_21</option>
        <option value="fw_22">fw_22</option>
    </select> -->

        </div>
        <div>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Course</th>
                        <th>Batch</th>
                        <th>Unit</th>
                        <th>Student Image</th>

                    </tr>
                </thead>
                <tbody id="tbody">

                </tbody>
            </table>

        </div>



    </div>
</body>

</html>

<script>

    var getData = JSON.parse(localStorage.getItem("formData"))
    // var trash= JSON.parse(localStorage.getItem("trash"))||[];

    displayData(getData);
    function displayData(getData) {
        getData.map(function (elem, index) {
            var tr = document.createElement("tr");

            var name = document.createElement("td")
            name.innerText = elem.Name;

            var image = document.createElement("img")
            image.src = elem.Image;
            image.setAttribute("class", "bimg")

            var course = document.createElement("td")
            course.innerText = elem.Course;

            var unit = document.createElement("td")
            unit.innerText = elem.Unit;

            var batch = document.createElement("td")
            batch.innerText = elem.Batch

            var del = document.createElement("td")
            del.innerText = "Delete";
            del.setAttribute("class", "del")
            del.addEventListener("click", remove)

            function remove() {
                document.querySelector("tbody").innerHTML = "";
                getData.splice(index, 1)

                localStorage.setItem("formData", JSON.stringify(getData))
                // localStorage.setItem("trash",JSON.stringify(trash))
                // trash.push(getData)
                displayData(getData);
                // window.location.reload();
                console.log("remove trigger")
            }
            tr.append(name, course, batch, unit, image, del)
            document.getElementById("tbody").append(tr)


        });

    }

    // sortRating.........................................................


    document.getElementById("b1").addEventListener("click", b1)

    function b1() {
        // localStorage.setItem("formData", JSON.stringify(getData))
        document.querySelector("tbody").innerHTML = "";
        getData.sort(function (a, b) {

            var x = a.Batch.toUpperCase();
            var y = b.Batch.toUpperCase();
            if (x > y) {
                return 1;
            }
            if (x < y) {
                return -1;
            }
            return 0;

            console.log("triggerd")
        }
        );
        console.log(getData)
        console.log("triggerd")
        // window.location.reload();
        displayData(getData);
    }


    document.getElementById("b2").addEventListener("click", b2)

    function b2() {
        document.querySelector("tbody").innerHTML = "";
        getData.sort(function (a, b) {
            var x = a.Batch.toUpperCase();
            var y = b.Batch.toUpperCase();
            if (x > y) {
                return -1;
            }
            if (x < y) {
                return 1;
            }
            return 0;
        });

        console.log(getData)
        console.log("triggerd")
        displayData(getData);
        // window.location.reload();

    }


    document.getElementById("filter").addEventListener("click", filtered)

    function filtered() {

        var selected = document.getElementById("filter").value


        var filterDataShow = getData.filter(function (elem) {
            document.querySelector("tbody").innerHTML = ""
            return elem.Batch = selected;

        })
        displayData(filterDataShow);
        console.log(filterDataShow)


    }


    // console.log(selected)






</script>